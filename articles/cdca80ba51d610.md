---
title: "è¤‡æ•°ã®æ¡ä»¶ã«ã‚ˆã£ã¦å¤‰æ•°ã®å€¤ã‚’ä¸Šæ›¸ãã™ã‚‹å‡¦ç†ã‚’letã‚’ä½¿ã‚ãšã«æ›¸ã"
emoji: "ğŸ”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["JavaScript"]
published: true
---

JavaScriptã§å¤‰æ•°ã‚’å®£è¨€ã™ã‚‹ã¨ãã¯å¯èƒ½ãªé™ã‚Š `let` ã§ã¯ãªã `const` ã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€ã¨è¨€ã‚ã‚Œã¦ä¹…ã—ã„æ˜¨ä»Šã§ã™ã€‚
ãã—ã¦ `let` ã§å®£è¨€ã—ãŸå¤‰æ•°ã«å†ä»£å…¥ã‚’è¡Œã†ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ã‚‚ã€å°‘ã—å·¥å¤«ã—ã¦ `const` ã ã‘ã‚’ä½¿ã†ã‚ˆã†ã«æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚å­˜åœ¨ã—ã¾ã™ã€‚

ä¾‹ãˆã°ã“ã‚“ãªã‚³ãƒ¼ãƒ‰ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†:

```ts
let message;

if (Math.random() < 0.5) {
  message = "low";
} else {
  message = "high";
}

console.log(message);
```

æ¡ä»¶ã«ã‚ˆã£ã¦ `message` ã®å€¤ã‚’å¤‰ãˆã‚‹ã¨ã„ã†ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚ã“ã‚Œã‚’ `let` ã‚’ç”¨ã„ãšã«å®Ÿç¾ã™ã‚‹ãªã‚‰ã€ã¾ãš1ã¤ã®æ¡ˆã¨ã—ã¦ã¯ä¸‰é …æ¼”ç®—å­ã‚’ä½¿ã†æ–¹æ³•ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™:

```ts
const message = Math.random() < 0.5 ? "low" : "high";
console.log(message);
```

ã¾ãŸJavaScriptã® `if` ã¯å¼ã§ã¯ãªãæ–‡ã§ã™ãŒã€ifæ–‡ã®éƒ¨åˆ†ã‚’å³æ™‚å®Ÿè¡Œé–¢æ•°å¼ï¼ˆIIFEï¼‰ã«ã—ã¦ã—ã¾ã†ã¨ã„ã†æ‰‹ã‚‚ã‚ã‚Šã¾ã™:

```ts
const message = (() => {
  if (Math.random() < 0.5) {
    return "low";
  } else {
    return "high";
  }
})();

console.log(message);
```

## è¤‡æ•°ã®æ¡ä»¶ãŒã‚ã‚‹å ´åˆ

è¤‡æ•°ã®æ¡ä»¶ã«ã‚ˆã£ã¦å¤‰æ•°ã®å€¤ã‚’ä¸Šæ›¸ãã—ã¦ã„ãã‚ˆã†ãªå ´åˆã¯ä¸€ç­‹ç¸„ã§ã¯è¡Œãã¾ã›ã‚“ã€‚
ä¾‹ãˆã°ã“ã‚“ãªã‚³ãƒ¼ãƒ‰ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†:

```ts
let numbers = [1, 2, 3, 4, 5];

if (Math.random() < 0.5) {
  numbers = numbers.map((n) => n * 2);
}

if (Math.random() < 0.3) {
  numbers = numbers.filter((n) => n > 3);
}

console.log(numbers);
```

ã“ã‚Œã‚’ `let` ã‚’ä½¿ã‚ãšã«æ›¸ãã¨ã—ãŸã‚‰ã€æ–¹æ³•ã®1ã¤ã¨ã—ã¦ã¯IIFEãŒã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å¼•æ•°ã«å–ã‚‹ã‚ˆã†ã«ã—ã¦å¾Œç¶šã®æ¡ä»¶ã‚’ç„¡åé–¢æ•°ã¨ã—ã¦æ¸¡ã™ã€ã¨ã„ã£ãŸæ›¸ãæ–¹ãŒã‚ã‚‹ã§ã—ã‚‡ã†:

```ts
const numbers = ((cb) => {
  const initialNumbers = [1, 2, 3, 4, 5];
  const numbers =
    Math.random() < 0.5 ? initialNumbers.map((n) => n * 2) : initialNumbers;

  return cb(numbers);
})((numbers) => {
  return Math.random() < 0.3 ? numbers.filter((n) => n > 3) : numbers;
});
```

ãŸã ã€ã“ã®æ–¹é‡ã ã¨æ¡ä»¶ãŒ3ã¤ã€4ã¤ã¨å¢—ãˆã¦ã„ãã¨è‹¥å¹²ãƒ†ã‚¯ã„ã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ãã¾ã™:

```ts
const numbers = ((cb) => {
  const initialNumbers = [1, 2, 3, 4, 5];
  const numbers =
    Math.random() < 0.5 ? initialNumbers.map((n) => n * 2) : initialNumbers;

  return cb(numbers);
})((numbers) => {
  return (cb) =>
    cb(Math.random() < 0.3 ? numbers.filter((n) => n > 3) : numbers);
})((numbers) => {
  return Math.random() < 0.9 ? numbers.map((n) => n + 10) : numbers;
});

console.log(numbers);
```

ç‰¹ã«æœ€å¾Œã®é–¢æ•°ã ã‘ã¯æœ€çµ‚çš„ãªå€¤ã‚’è¿”ã™ï¼ˆã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å—ã‘å–ã‚‹å‰æã®é–¢æ•°ã‚’è¿”ã™ã‚ã‘ã§ã¯ãªã„ï¼‰ãŸã‚å¯¾ç§°æ€§ãŒæ‚ªãã€æ¡ä»¶ã‚’å¢—ã‚„ã™æ™‚ã«ä¿®æ­£ãŒå¿…è¦ã¨ã„ã†é¢å€’ãªç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

### `reduce`

ãã“ã§æ¡ä»¶ï¼ˆã‚’è¡¨ç¾ã™ã‚‹é–¢æ•°ï¼‰ã‚’å¯å¤‰é•·å¼•æ•°ã¨ã—ã¦å—ã‘å–ã£ã¦ `reduce` ã—ã¦ã—ã¾ã†ã€ã¨ã„ã†æ‰‹æ³•ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ã¤ã¾ã‚Šã“ã†ã„ã†ã“ã¨ã§ã™:

```ts
const numbers = ((...converters) => {
  const initialNumbers = [1, 2, 3, 4, 5];
  return converters.reduce((acc, converter) => converter(acc), initialNumbers);
})(
  (numbers) => (Math.random() < 0.5 ? numbers.map((n) => n * 2) : numbers),
  (numbers) => (Math.random() < 0.3 ? numbers.filter((n) => n > 3) : numbers),
  (numbers) => (Math.random() < 0.9 ? numbers.map((n) => n + 10) : numbers)
);

console.log(numbers);
```

ã“ã†ã™ã‚Œã°æ¡ä»¶ãŒå¢—ãˆã¦ã„ã£ãŸã¨ã—ã¦ã‚‚å˜ç´”ã«å¼•æ•°ã¨ã—ã¦è¿½åŠ ã—ã¦ã„ãã ã‘ã§æ¸ˆã¿ã¾ã™ã€‚

ã“ã“ã¾ã§æ¥ã‚‹ã¨æ±ç”¨ã®é–¢æ•°ã¨ã—ã¦ç‹¬ç«‹ã•ã›ã¦ã‚‚è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚TypeScriptã§æ›¸ãã¨ã“ã†ã„ã†æ„Ÿã˜ã§ã™:

```ts
type Converter<T> = (input: T) => T;

const multiConvert = <T>(
  initialValue: T,
  ...converters: ReadonlyArray<Converter<T>>
): T => converters.reduce((acc, converter) => converter(acc), initialValue);

const numbers = multiConvert(
  [1, 2, 3, 4, 5],
  (numbers) => (Math.random() < 0.5 ? numbers.map((n) => n * 2) : numbers),
  (numbers) => (Math.random() < 0.3 ? numbers.filter((n) => n > 3) : numbers),
  (numbers) => (Math.random() < 0.9 ? numbers.map((n) => n + 10) : numbers)
);

console.log(numbers);
```

## ã¾ã¨ã‚

ç”¨æ³•ãƒ»ç”¨é‡ã‚’å®ˆã£ã¦æ­£ã—ããŠä½¿ã„ãã ã•ã„ã€‚
